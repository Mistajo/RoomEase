{% extends 'themes/base_user.html.twig' %}

{% block title %}
	- Reservation salle de réunion - Espace Utilisateur
{% endblock %}

{% block main %}

	<h1 class=' text-secondary text-center my-3 display-5'>Bienvenue</h1>
	<div
		class="container">

		<!--Alerte Flash-->
		<div class="col-md-6 mx-auto">
			{% for message in app.flashes('success') %}
				<div class="text-center alert alert-success alert-dismissible fade show" role="alert">
					{{message}}
					<button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
				</div>
			{% endfor %}

			{% for message in app.flashes('warning') %}
				<div class="text-center alert alert-warning alert-dismissible fade show" role="alert">
					{{message}}
					<button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
				</div>
			{% endfor %}
		</div>
		<!--Fin Alerte Flash-->


		<div class=' jumbotron'>
			{{ form_start(form) }}
			<div class="row">
				<div class="col-md-6">
					<div class="mb-3">
						<label for="">Nom</label>
						<div class="text-danger">{{ form_errors(form.name) }}</div>
						{{ form_widget(form.name, {'attr' : {'class': 'form-control'}}) }}
					</div>
				</div>
				<div class="col-md-6">
					<div class="mb-3">
						<label for="">Equipements</label>
						<div class="text-danger">{{ form_errors(form.equipments) }}</div>
						{{ form_widget(form.equipments, {'attr' : {'class': 'form-control,'}}) }}
					</div>
				</div>
			</div>

			<div class="row">
				<div class="col-md-6">
					<div class="mb-3">
						<label for="">Capacité Minimale</label>
						<div class="text-danger">{{ form_errors(form.minCapacity) }}</div>
						{{ form_widget(form.minCapacity, {'attr' : {'class': 'form-control'}}) }}
					</div>
				</div>
				<div class="col-md-6">
					<div class="mb-3">
						<label for="">Capacité Maximale</label>
						<div class="text-danger">{{ form_errors(form.maxCapacity) }}</div>
						{{ form_widget(form.maxCapacity, {'attr' : {'class': 'form-control'}}) }}
					</div>
				</div>
			</div>

			<div class="row">
				<div class="col-md-6">
					<div class="mb-3">
						<label for="">Prix Minimum</label>
						<div class="text-danger">{{ form_errors(form.minPrice) }}</div>
						{{ form_widget(form.minPrice, {'attr' : {'class': 'form-control'}}) }}
					</div>
				</div>
				<div class="col-md-6">
					<div class="mb-3">
						<label for="">Prix Maximum</label>
						<div class="text-danger">{{ form_errors(form.maxPrice) }}</div>
						{{ form_widget(form.maxPrice, {'attr' : {'class': 'form-control'}}) }}
					</div>
				</div>
			</div>


			<div class="mb-3 text-center">
				<button type="submit" class='btn btn-primary'>Filtrer</button>
				<a href="{{path('user.home.index')}}" class='btn btn-secondary'>Effacer</a>
			</div>


		</div>
		{{ form_end(form) }}


		<div class="row">
			{% for meetingroom in meetingrooms %}
				<div class="col-md-6 mb-4 d-flex justify-content-center">
					<div class="card mb-3 border shadow w-75 h-100">
						<a href="#">
							{% if meetingroom.image %}
								<img src="{{ vich_uploader_asset(meetingroom, 'imageFile') }}" alt="{{ meetingroom.name }}" class='card-img-top img-fluid'>
							{% else %}
								<img src="{{asset('images/NoImage/No_Image.jpg')}}" alt="{{ meetingroom.description|striptags|u.truncate(30, '...')}}" class="card-img-top img-fluid">


							{% endif %}
						</a>
						<div class="card-body">
							<h5 class="card-title">Nom de la salle :
								<strong>
									{{meetingroom.name}}
								</strong>
							</h5>
							<li>
								Capacité :
								{{ meetingroom.Capacity }}
								Personnes
							</li>

							{% if meetingroom.description is not empty %}
								<p class="card-text">Description :
									{{ meetingroom.description|striptags|u.truncate(70, '...')|raw }}
								</p>
							{% endif %}

							<li>
								Equipements :
								{% if meetingroom.equipment is empty %}
									<p>---</p>
								{% else %}
									{% for equipment in meetingroom.equipment %}
										<span class="badge text-bg-primary">{{equipment.name}}</span>
									{% endfor %}
								{% endif %}
							</li>


							<p>
								<a href="{{path('user.meetingroom.show', {'id' : meetingroom.id})}}" class="btn btn-secondary">Voir Plus</a>

							</p>

						</div>
					</div>

				</div>
			{% endfor %}
		</div>
	</div>
{% endblock %}
